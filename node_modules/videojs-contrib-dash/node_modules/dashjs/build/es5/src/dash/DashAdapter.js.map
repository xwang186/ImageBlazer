{"version":3,"sources":["../../../../src/dash/DashAdapter.js"],"names":[],"mappings":"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","file":"DashAdapter.js","sourcesContent":["/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport Constants from '../streaming/constants/Constants';\nimport DashConstants from './constants/DashConstants';\nimport RepresentationInfo from '../streaming/vo/RepresentationInfo';\nimport MediaInfo from '../streaming/vo/MediaInfo';\nimport StreamInfo from '../streaming/vo/StreamInfo';\nimport ManifestInfo from '../streaming/vo/ManifestInfo';\nimport Event from './vo/Event';\nimport FactoryMaker from '../core/FactoryMaker';\nimport cea608parser from '../../externals/cea608-parser';\nimport { checkInteger } from '../streaming/utils/SupervisorTools';\n\nfunction DashAdapter() {\n    let instance,\n        dashManifestModel,\n        voPeriods,\n        voAdaptations,\n        currentMediaInfo;\n\n    function setup() {\n        reset();\n    }\n\n    function setConfig(config) {\n        if (!config) return;\n\n        if (config.dashManifestModel) {\n            dashManifestModel = config.dashManifestModel;\n        }\n    }\n\n    function getRepresentationForRepresentationInfo(representationInfo, representationController) {\n        return representationController && representationInfo ? representationController.getRepresentationForQuality(representationInfo.quality) : null;\n    }\n\n    function getAdaptationForMediaInfo(mediaInfo) {\n\n        if (!mediaInfo || !mediaInfo.streamInfo || mediaInfo.streamInfo.id === undefined || !voAdaptations[mediaInfo.streamInfo.id]) return null;\n        return voAdaptations[mediaInfo.streamInfo.id][mediaInfo.index];\n    }\n\n    function getPeriodForStreamInfo(streamInfo, voPeriodsArray) {\n        const ln = voPeriodsArray.length;\n\n        for (let i = 0; i < ln; i++) {\n            let voPeriod = voPeriodsArray[i];\n\n            if (streamInfo.id === voPeriod.id) return voPeriod;\n        }\n\n        return null;\n    }\n\n    function convertRepresentationToRepresentationInfo(voRepresentation) {\n        let representationInfo = new RepresentationInfo();\n        const realAdaptation = voRepresentation.adaptation.period.mpd.manifest.Period_asArray[voRepresentation.adaptation.period.index].AdaptationSet_asArray[voRepresentation.adaptation.index];\n        const realRepresentation = dashManifestModel.getRepresentationFor(voRepresentation.index, realAdaptation);\n\n        representationInfo.id = voRepresentation.id;\n        representationInfo.quality = voRepresentation.index;\n        representationInfo.bandwidth = dashManifestModel.getBandwidth(realRepresentation);\n        representationInfo.DVRWindow = voRepresentation.segmentAvailabilityRange;\n        representationInfo.fragmentDuration = voRepresentation.segmentDuration || (voRepresentation.segments && voRepresentation.segments.length > 0 ? voRepresentation.segments[0].duration : NaN);\n        representationInfo.MSETimeOffset = voRepresentation.MSETimeOffset;\n        representationInfo.useCalculatedLiveEdgeTime = voRepresentation.useCalculatedLiveEdgeTime;\n        representationInfo.mediaInfo = convertAdaptationToMediaInfo(voRepresentation.adaptation);\n\n        return representationInfo;\n    }\n\n    function convertAdaptationToMediaInfo(adaptation) {\n        let mediaInfo = new MediaInfo();\n        const realAdaptation = adaptation.period.mpd.manifest.Period_asArray[adaptation.period.index].AdaptationSet_asArray[adaptation.index];\n        let viewpoint;\n\n        mediaInfo.id = adaptation.id;\n        mediaInfo.index = adaptation.index;\n        mediaInfo.type = adaptation.type;\n        mediaInfo.streamInfo = convertPeriodToStreamInfo(adaptation.period);\n        mediaInfo.representationCount = dashManifestModel.getRepresentationCount(realAdaptation);\n        mediaInfo.labels = dashManifestModel.getLabelsForAdaptation(realAdaptation);\n        mediaInfo.lang = dashManifestModel.getLanguageForAdaptation(realAdaptation);\n        viewpoint = dashManifestModel.getViewpointForAdaptation(realAdaptation);\n        mediaInfo.viewpoint = viewpoint ? viewpoint.value : undefined;\n        mediaInfo.accessibility = dashManifestModel.getAccessibilityForAdaptation(realAdaptation).map(function (accessibility) {\n            let accessibilityValue = accessibility.value;\n            let accessibilityData = accessibilityValue;\n            if (accessibility.schemeIdUri && (accessibility.schemeIdUri.search('cea-608') >= 0) && typeof (cea608parser) !== 'undefined') {\n                if (accessibilityValue) {\n                    accessibilityData = 'cea-608:' + accessibilityValue;\n                } else {\n                    accessibilityData = 'cea-608';\n                }\n                mediaInfo.embeddedCaptions = true;\n            }\n            return accessibilityData;\n        });\n\n        mediaInfo.audioChannelConfiguration = dashManifestModel.getAudioChannelConfigurationForAdaptation(realAdaptation).map(function (audioChannelConfiguration) {\n            return audioChannelConfiguration.value;\n        });\n        mediaInfo.roles = dashManifestModel.getRolesForAdaptation(realAdaptation).map(function (role) {\n            return role.value;\n        });\n        mediaInfo.codec = dashManifestModel.getCodec(realAdaptation);\n        mediaInfo.mimeType = dashManifestModel.getMimeType(realAdaptation);\n        mediaInfo.contentProtection = dashManifestModel.getContentProtectionData(realAdaptation);\n        mediaInfo.bitrateList = dashManifestModel.getBitrateListForAdaptation(realAdaptation);\n\n        if (mediaInfo.contentProtection) {\n            mediaInfo.contentProtection.forEach(function (item) {\n                item.KID = dashManifestModel.getKID(item);\n            });\n        }\n\n        mediaInfo.isText = dashManifestModel.getIsTextTrack(mediaInfo.mimeType);\n\n        return mediaInfo;\n    }\n\n    function convertVideoInfoToEmbeddedTextInfo(mediaInfo, channel, lang) {\n        mediaInfo.id = channel; // CC1, CC2, CC3, or CC4\n        mediaInfo.index = 100 + parseInt(channel.substring(2, 3));\n        mediaInfo.type = Constants.EMBEDDED_TEXT;\n        mediaInfo.codec = 'cea-608-in-SEI';\n        mediaInfo.isText = true;\n        mediaInfo.isEmbedded = true;\n        mediaInfo.lang = lang;\n        mediaInfo.roles = ['caption'];\n    }\n\n    function convertVideoInfoToThumbnailInfo(mediaInfo) {\n        mediaInfo.type = Constants.IMAGE;\n    }\n\n    function convertPeriodToStreamInfo(period) {\n        let streamInfo = new StreamInfo();\n        const THRESHOLD = 1;\n\n        streamInfo.id = period.id;\n        streamInfo.index = period.index;\n        streamInfo.start = period.start;\n        streamInfo.duration = period.duration;\n        streamInfo.manifestInfo = convertMpdToManifestInfo(period.mpd);\n        streamInfo.isLast = period.mpd.manifest.Period_asArray.length === 1 || Math.abs((streamInfo.start + streamInfo.duration) - streamInfo.manifestInfo.duration) < THRESHOLD;\n\n        return streamInfo;\n    }\n\n    function convertMpdToManifestInfo(mpd) {\n        let manifestInfo = new ManifestInfo();\n\n        manifestInfo.DVRWindowSize = mpd.timeShiftBufferDepth;\n        manifestInfo.loadedTime = mpd.manifest.loadedTime;\n        manifestInfo.availableFrom = mpd.availabilityStartTime;\n        manifestInfo.minBufferTime = mpd.manifest.minBufferTime;\n        manifestInfo.maxFragmentDuration = mpd.maxSegmentDuration;\n        manifestInfo.duration = dashManifestModel.getDuration(mpd.manifest);\n        manifestInfo.isDynamic = dashManifestModel.getIsDynamic(mpd.manifest);\n\n        return manifestInfo;\n    }\n\n    function getMediaInfoForType(streamInfo, type) {\n\n        if (voPeriods.length === 0) {\n            return null;\n        }\n\n        const manifest = voPeriods[0].mpd.manifest;\n        let realAdaptation = getAdaptationForType(manifest, streamInfo.index, type, streamInfo);\n        if (!realAdaptation) return null;\n\n        let selectedVoPeriod = getPeriodForStreamInfo(streamInfo, voPeriods);\n        let periodId = selectedVoPeriod.id;\n        let idx = dashManifestModel.getIndexForAdaptation(realAdaptation, manifest, streamInfo.index);\n\n        voAdaptations[periodId] = voAdaptations[periodId] || dashManifestModel.getAdaptationsForPeriod(selectedVoPeriod);\n\n        return convertAdaptationToMediaInfo(voAdaptations[periodId][idx]);\n    }\n\n    function getIsMain(adaptation) {\n        return dashManifestModel.getRolesForAdaptation(adaptation).filter(function (role) {\n            return role.value === DashConstants.MAIN;\n        })[0];\n    }\n\n    function getAdaptationForType(manifest, periodIndex, type, streamInfo) {\n        const adaptations = dashManifestModel.getAdaptationsForType(manifest, periodIndex, type);\n\n        if (!adaptations || adaptations.length === 0) return null;\n\n        if (adaptations.length > 1 && streamInfo) {\n            const allMediaInfoForType = getAllMediaInfoForType(streamInfo, type);\n\n            if (currentMediaInfo[streamInfo.id] && currentMediaInfo[streamInfo.id][type]) {\n                for (let i = 0, ln = adaptations.length; i < ln; i++) {\n                    if (currentMediaInfo[streamInfo.id][type].isMediaInfoEqual(allMediaInfoForType[i])) {\n                        return adaptations[i];\n                    }\n                }\n            }\n\n            for (let i = 0, ln = adaptations.length; i < ln; i++) {\n                if (getIsMain(adaptations[i])) {\n                    return adaptations[i];\n                }\n            }\n        }\n\n        return adaptations[0];\n    }\n\n    function getAllMediaInfoForType(streamInfo, type, externalManifest) {\n        let voLocalPeriods = voPeriods;\n        let manifest = externalManifest;\n        let mediaArr = [];\n        let data,\n            media,\n            idx,\n            i,\n            j,\n            ln;\n\n        if (manifest) {\n            checkSetConfigCall();\n            const mpd = dashManifestModel.getMpd(manifest);\n\n            voLocalPeriods = dashManifestModel.getRegularPeriods(mpd);\n        } else {\n            if (voPeriods.length > 0) {\n                manifest = voPeriods[0].mpd.manifest;\n            } else {\n                return mediaArr;\n            }\n        }\n\n        const selectedVoPeriod = getPeriodForStreamInfo(streamInfo, voLocalPeriods);\n        const periodId = selectedVoPeriod.id;\n        const adaptationsForType = dashManifestModel.getAdaptationsForType(manifest, streamInfo.index, type !== Constants.EMBEDDED_TEXT ? type : Constants.VIDEO);\n\n        if (!adaptationsForType) return mediaArr;\n\n        voAdaptations[periodId] = voAdaptations[periodId] || dashManifestModel.getAdaptationsForPeriod(selectedVoPeriod);\n\n        for (i = 0, ln = adaptationsForType.length; i < ln; i++) {\n            data = adaptationsForType[i];\n            idx = dashManifestModel.getIndexForAdaptation(data, manifest, streamInfo.index);\n            media = convertAdaptationToMediaInfo(voAdaptations[periodId][idx]);\n\n            if (type === Constants.EMBEDDED_TEXT) {\n                let accessibilityLength = media.accessibility.length;\n                for (j = 0; j < accessibilityLength; j++) {\n                    if (!media) {\n                        continue;\n                    }\n                    let accessibility = media.accessibility[j];\n                    if (accessibility.indexOf('cea-608:') === 0) {\n                        let value = accessibility.substring(8);\n                        let parts = value.split(';');\n                        if (parts[0].substring(0, 2) === 'CC') {\n                            for (j = 0; j < parts.length; j++) {\n                                if (!media) {\n                                    media = convertAdaptationToMediaInfo.call(this, voAdaptations[periodId][idx]);\n                                }\n                                convertVideoInfoToEmbeddedTextInfo(media, parts[j].substring(0, 3), parts[j].substring(4));\n                                mediaArr.push(media);\n                                media = null;\n                            }\n                        } else {\n                            for (j = 0; j < parts.length; j++) { // Only languages for CC1, CC2, ...\n                                if (!media) {\n                                    media = convertAdaptationToMediaInfo.call(this, voAdaptations[periodId][idx]);\n                                }\n                                convertVideoInfoToEmbeddedTextInfo(media, 'CC' + (j + 1), parts[j]);\n                                mediaArr.push(media);\n                                media = null;\n                            }\n                        }\n                    } else if (accessibility.indexOf('cea-608') === 0) { // Nothing known. We interpret it as CC1=eng\n                        convertVideoInfoToEmbeddedTextInfo(media, Constants.CC1, 'eng');\n                        mediaArr.push(media);\n                        media = null;\n                    }\n                }\n            } else if (type === Constants.IMAGE) {\n                convertVideoInfoToThumbnailInfo(media);\n                mediaArr.push(media);\n                media = null;\n            } else if (media) {\n                mediaArr.push(media);\n            }\n        }\n\n        return mediaArr;\n    }\n\n    function checkSetConfigCall() {\n        if (!dashManifestModel || !dashManifestModel.hasOwnProperty('getMpd') || !dashManifestModel.hasOwnProperty('getRegularPeriods')) {\n            throw new Error('setConfig function has to be called previously');\n        }\n    }\n\n    function updatePeriods(newManifest) {\n        if (!newManifest) return null;\n\n        checkSetConfigCall();\n\n        const mpd = dashManifestModel.getMpd(newManifest);\n\n        voPeriods = dashManifestModel.getRegularPeriods(mpd);\n        voAdaptations = {};\n    }\n\n    function getStreamsInfo(externalManifest, maxStreamsInfo) {\n        const streams = [];\n        let voLocalPeriods = voPeriods;\n\n        //if manifest is defined, getStreamsInfo is for an outside manifest, not the current one\n        if (externalManifest) {\n            checkSetConfigCall();\n            const mpd = dashManifestModel.getMpd(externalManifest);\n\n            voLocalPeriods = dashManifestModel.getRegularPeriods(mpd);\n        }\n\n        if (!maxStreamsInfo) {\n            maxStreamsInfo = voLocalPeriods.length;\n        }\n        for (let i = 0; i < maxStreamsInfo; i++) {\n            streams.push(convertPeriodToStreamInfo(voLocalPeriods[i]));\n        }\n\n        return streams;\n    }\n\n    function checkStreamProcessor(streamProcessor) {\n        if (!streamProcessor || !streamProcessor.hasOwnProperty('getRepresentationController') || !streamProcessor.hasOwnProperty('getIndexHandler') ||\n            !streamProcessor.hasOwnProperty('getMediaInfo') || !streamProcessor.hasOwnProperty('getType') || !streamProcessor.hasOwnProperty('getStreamInfo')) {\n            throw new Error('streamProcessor parameter is missing or malformed!');\n        }\n    }\n\n    function checkRepresentationController(representationController) {\n        if (!representationController || !representationController.hasOwnProperty('getRepresentationForQuality') || !representationController.hasOwnProperty('getCurrentRepresentation')) {\n            throw new Error('representationController parameter is missing or malformed!');\n        }\n    }\n\n    function getInitRequest(streamProcessor, quality) {\n        let representationController,\n            representation,\n            indexHandler;\n\n        checkStreamProcessor(streamProcessor);\n        checkInteger(quality);\n\n        representationController = streamProcessor.getRepresentationController();\n        indexHandler = streamProcessor.getIndexHandler();\n\n        representation = representationController ? representationController.getRepresentationForQuality(quality) : null;\n\n        return indexHandler ? indexHandler.getInitRequest(representation) : null;\n    }\n\n    function getFragmentRequest(streamProcessor, representationInfo, time, options) {\n        let representationController,\n            representation,\n            indexHandler;\n\n        let fragRequest = null;\n\n        checkStreamProcessor(streamProcessor);\n\n        representationController = streamProcessor.getRepresentationController();\n        representation = getRepresentationForRepresentationInfo(representationInfo, representationController);\n        indexHandler = streamProcessor.getIndexHandler();\n\n        if (indexHandler) {\n            //if time and options are undefined, it means the next segment is requested\n            //otherwise, the segment at this specific time is requested.\n            if (time !== undefined && options !== undefined) {\n                fragRequest = indexHandler.getSegmentRequestForTime(representation, time, options);\n            } else {\n                fragRequest = indexHandler.getNextSegmentRequest(representation);\n            }\n        }\n\n        return fragRequest;\n    }\n\n    function getIndexHandlerTime(streamProcessor) {\n        checkStreamProcessor(streamProcessor);\n\n        const indexHandler = streamProcessor.getIndexHandler();\n\n        return indexHandler ? indexHandler.getCurrentTime() : NaN;\n    }\n\n    function setIndexHandlerTime(streamProcessor, value) {\n        checkStreamProcessor(streamProcessor);\n\n        const indexHandler = streamProcessor.getIndexHandler();\n        if (indexHandler) {\n            indexHandler.setCurrentTime(value);\n        }\n    }\n\n    function resetIndexHandler(streamProcessor) {\n        checkStreamProcessor(streamProcessor);\n\n        const indexHandler = streamProcessor.getIndexHandler();\n        if (indexHandler) {\n            indexHandler.resetIndex();\n        }\n    }\n\n    function updateData(streamProcessor) {\n        checkStreamProcessor(streamProcessor);\n\n        const selectedVoPeriod = getPeriodForStreamInfo(streamProcessor.getStreamInfo(), voPeriods);\n        const mediaInfo = streamProcessor.getMediaInfo();\n        const voAdaptation = getAdaptationForMediaInfo(mediaInfo);\n        const type = streamProcessor.getType();\n\n        let id,\n            realAdaptation;\n\n        id = mediaInfo ? mediaInfo.id : null;\n        if (voPeriods.length > 0) {\n            realAdaptation = id ? dashManifestModel.getAdaptationForId(id, voPeriods[0].mpd.manifest, selectedVoPeriod.index) : dashManifestModel.getAdaptationForIndex(mediaInfo.index, voPeriods[0].mpd.manifest, selectedVoPeriod.index);\n            streamProcessor.getRepresentationController().updateData(realAdaptation, voAdaptation, type);\n        }\n    }\n\n    /**\n     * Get a specific voRepresentation. If quality parameter is defined, this function will return the voRepresentation for this quality.\n     * Otherwise, this function will return the current voRepresentation used by the representationController.\n     * @param {RepresentationController} representationController - RepresentationController reference\n     * @param {number} quality - quality index of the voRepresentaion expected.\n     */\n    function getRepresentationInfo(representationController, quality) {\n        checkRepresentationController(representationController);\n        let voRepresentation;\n\n        if (quality !== undefined) {\n            checkInteger(quality);\n            voRepresentation = representationController.getRepresentationForQuality(quality);\n        } else {\n            voRepresentation = representationController.getCurrentRepresentation();\n        }\n\n        return voRepresentation ? convertRepresentationToRepresentationInfo(voRepresentation) : null;\n    }\n\n    function getEvent(eventBox, eventStreams, startTime) {\n        if (!eventBox || !eventStreams) {\n            return null;\n        }\n        const event = new Event();\n        const schemeIdUri = eventBox.scheme_id_uri;\n        const value = eventBox.value;\n        const timescale = eventBox.timescale;\n        const presentationTimeDelta = eventBox.presentation_time_delta;\n        const duration = eventBox.event_duration;\n        const id = eventBox.id;\n        const messageData = eventBox.message_data;\n        const presentationTime = startTime * timescale + presentationTimeDelta;\n\n        if (!eventStreams[schemeIdUri + '/' + value]) return null;\n\n        event.eventStream = eventStreams[schemeIdUri + '/' + value];\n        event.eventStream.value = value;\n        event.eventStream.timescale = timescale;\n        event.duration = duration;\n        event.id = id;\n        event.presentationTime = presentationTime;\n        event.messageData = messageData;\n        event.presentationTimeDelta = presentationTimeDelta;\n\n        return event;\n    }\n\n    function getEventsFor(info, streamProcessor) {\n        let events = [];\n\n        if (voPeriods.length === 0) {\n            return events;\n        }\n\n        const manifest = voPeriods[0].mpd.manifest;\n\n        if (info instanceof StreamInfo) {\n            events = dashManifestModel.getEventsForPeriod(getPeriodForStreamInfo(info, voPeriods));\n        } else if (info instanceof MediaInfo) {\n            events = dashManifestModel.getEventStreamForAdaptationSet(manifest, getAdaptationForMediaInfo(info));\n        } else if (info instanceof RepresentationInfo) {\n            events = dashManifestModel.getEventStreamForRepresentation(manifest, getRepresentationForRepresentationInfo(info, streamProcessor.getRepresentationController()));\n        }\n\n        return events;\n    }\n\n    function setCurrentMediaInfo(streamId, type, mediaInfo) {\n        currentMediaInfo[streamId] = currentMediaInfo[streamId] || {};\n        currentMediaInfo[streamId][type] = currentMediaInfo[streamId][type] || {};\n        currentMediaInfo[streamId][type] = mediaInfo;\n    }\n\n    function reset() {\n        voPeriods = [];\n        voAdaptations = {};\n        currentMediaInfo = {};\n    }\n\n    instance = {\n        convertDataToRepresentationInfo: convertRepresentationToRepresentationInfo,\n        getDataForMedia: getAdaptationForMediaInfo,\n        getStreamsInfo: getStreamsInfo,\n        getMediaInfoForType: getMediaInfoForType,\n        getAllMediaInfoForType: getAllMediaInfoForType,\n        getRepresentationInfo: getRepresentationInfo,\n        getAdaptationForType: getAdaptationForType,\n        updateData: updateData,\n        getInitRequest: getInitRequest,\n        getFragmentRequest: getFragmentRequest,\n        getIndexHandlerTime: getIndexHandlerTime,\n        setIndexHandlerTime: setIndexHandlerTime,\n        getEventsFor: getEventsFor,\n        getEvent: getEvent,\n        setConfig: setConfig,\n        updatePeriods: updatePeriods,\n        reset: reset,\n        resetIndexHandler: resetIndexHandler,\n        setCurrentMediaInfo: setCurrentMediaInfo\n    };\n\n    setup();\n    return instance;\n}\n\nDashAdapter.__dashjs_factory_name = 'DashAdapter';\nexport default FactoryMaker.getSingletonFactory(DashAdapter);\n"]}